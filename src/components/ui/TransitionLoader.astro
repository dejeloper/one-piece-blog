---
export interface Props {
  show?: boolean;
}
const { show = true } = Astro.props;
---

{show && (
  <div
    id="transition-loader"
    class="fixed inset-0 z-[9998] flex items-center justify-center backdrop-blur-md transition-opacity duration-400 ease-in-out"
    style="background: linear-gradient(180deg, hsl(var(--primary)/0.05) 0%, var(--background) 50%, hsl(var(--primary)/0.08) 100%); color: var(--foreground);"
    role="status"
    aria-busy="true"
  >
    <div class="relative flex flex-col items-center gap-4 w-full max-w-[350px]">
      <!-- Barco -->
      <div class="relative flex items-center justify-center">
        <div class="sailing-ship relative z-10 text-6xl">⛵</div>
      </div>

      <!-- Olas -->
      <div class="waves-container flex flex-col gap-1 -mt-18 w-full overflow-hidden relative">
        {[...Array(3)].map(() => (
          <div class="wave-line">
            <span class="wave-emoji text-2xl opacity-60">
              〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️〰️
            </span>
          </div>
        ))}
      </div>

      <!-- Texto cargando -->
      <div class="flex items-center gap-1 text-center text-3xl font-bold tracking-wide">
        <span>Cargando</span>
        <span class="inline-flex gap-0">
          <span class="dot">.</span>
          <span class="dot">.</span>
          <span class="dot">.</span>
        </span>
      </div>
    </div>
  </div>
)}


<style>
  .sailing-ship {
    filter: drop-shadow(0 8px 16px hsl(var(--primary)/0.3));
    animation: sail 3s ease-in-out infinite;
  }

  .waves-container .wave-emoji {
    display: block;
    animation: waveEmojiMove 6s ease-in-out infinite alternate;
    will-change: transform;
  }

  .wave-line {
    display: flex;
    white-space: nowrap;
  }

  .dot {
    animation: dotBounce 1.4s infinite;
  }
  .dot:nth-child(2) { animation-delay: 0.2s; }
  .dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes sail {
    0%, 100% { transform: translateY(0px) rotate(-2deg); }
    50% { transform: translateY(-15px) rotate(2deg); }
  }

  @keyframes waveEmojiMove {
    0% { transform: translateX(-5ch); }
    100% { transform: translateX(-15ch); }
  }

  @keyframes dotBounce {
    0%, 80%, 100% { transform: translateY(0); opacity: 1; }
    40% { transform: translateY(-8px); opacity: 0.5; }
  }

  @media (prefers-reduced-motion: reduce) {
    .sailing-ship, .waves-container .wave-emoji, .dot { animation: none; }
  }
</style>